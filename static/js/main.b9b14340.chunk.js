(this["webpackJsonpgithub-search1"]=this["webpackJsonpgithub-search1"]||[]).push([[0],{62:function(e,t,a){e.exports=a(75)},69:function(e,t,a){},75:function(e,t,a){"use strict";a.r(t);var r=a(2),n=a.n(r),c=a(56),l=a.n(c),o=function(e){return n.a.createElement("div",{className:"close",onClick:e.onClose},n.a.createElement("svg",{t:"1602233649182",className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2386",fill:"#000"},n.a.createElement("path",{d:"M660.518 682.87c-5.903 0-11.804-2.2-16.306-6.702L342.366 374.372c-9.003-9.003-9.003-23.608 0-32.61s23.608-9.002 32.61 0l301.847 301.796c9.002 9.003 9.002 23.607 0 32.61-4.501 4.5-10.404 6.703-16.305 6.703z","p-id":"2387"}),n.a.createElement("path",{d:"M358.67 682.87c-5.901 0-11.803-2.2-16.304-6.702-9.003-9.003-9.003-23.607 0-32.61l301.846-301.796c9.003-9.002 23.607-9.002 32.61 0 9.002 9.002 9.002 23.607 0 32.61L374.977 676.168c-4.503 4.5-10.404 6.703-16.307 6.703z","p-id":"2388"}),n.a.createElement("path",{d:"M509.62 956.157c-246.579 0-447.244-200.614-447.244-447.242 0-246.58 200.664-447.218 447.243-447.218 246.58 0 447.243 200.638 447.243 447.218 0 246.628-200.664 447.242-447.243 447.242z m0-848.346c-221.172 0-401.13 179.933-401.13 401.105 0 221.169 179.958 401.128 401.13 401.128 221.17 0 401.127-179.959 401.127-401.128 0-221.172-179.957-401.105-401.128-401.105z","p-id":"2389"})))},s=Object(r.createContext)(),i=Object({NODE_ENV:"production",PUBLIC_URL:"/github-search",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).APP_GITHUB_CLIENT_SECRET||"7b7cc672235587292be65d11d8ae729b14a0d162",u=function(){var e=Object(r.useRef)(null),t=Object(r.useContext)(s),a=t.clearRepo,c=t.searchValue,l=t.searchGithub,i=t.setShowHistory,u=t.setSearchValue;return n.a.createElement("div",{className:"search"},n.a.createElement("input",{type:"text",value:c,className:"search_input",onChange:function(t){var a=t.target.value;u(a),a||clearTimeout(e.current),e.current?(clearTimeout(e.current),e.current=setTimeout((function(){l({searchValue:a})}),800)):e.current=setTimeout((function(){l({searchValue:a})}),800)},placeholder:"Please input search in github"}),c&&n.a.createElement(o,{onClose:function(){u(""),a(),i(!0)}}))},h=a(38),p=a.n(h),m=a(57),E=a(36),d=a(21),f=a(39),O=a(58),S=function(e){var t=e.item;return n.a.createElement("li",{className:"pullup-list-item item"},n.a.createElement("a",{href:t.node.url},t.node.name),n.a.createElement("span",null,"(",t.node.description,")"))},v=function(){var e=Object(r.useContext)(s),t=Object(d.get)(e,"repoList")||[];return n.a.createElement("ul",{className:"pullup-list"},t.map((function(e,t){return n.a.createElement(S,{key:t,item:e})})))},R=function(){return n.a.createElement("svg",{t:"1602328570792",className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1906",fill:"#000"},n.a.createElement("path",{d:"M745.14 264.76c3.01-3.42 4.85-7.89 4.85-12.77 0-10.67-8.73-19.41-19.41-19.41h-3.55c0.88-3.88 1.08-7.97 0.48-12.12-2.65-18.23-19.72-30.97-37.95-28.32l-278.52 40.45h-40.08c-6.83 0-12.86 3.59-16.32 8.96-9 3.37-16 10.46-19.43 19.16h-11.6c-22.62 0-41.13 18.51-41.13 41.13s18.51 41.13 41.13 41.13h259.15v18.68c0 2.91 0.62 5.67 1.74 8.16 3.21 7.19 10.54 12.13 18.98 11.83 7.88-0.28 14.49-5.24 17.51-12.09 1.14-2.58 1.77-5.42 1.77-8.38v-11.71c0-2.29 0.45-4.48 1.24-6.49h32.96c0.79 2.01 1.24 4.2 1.24 6.49v73.39c0 10.85 8.44 20.08 19.28 20.47 11.37 0.4 20.72-8.7 20.72-19.99v-80.36h29.17c22.62 0 41.13-18.51 41.13-41.13 0.01-16.28-9.57-30.42-23.36-37.08z",fill:"#B4E7B4","p-id":"1907"}),n.a.createElement("path",{d:"M658.21 349.45c0-9.83-7.99-17.78-17.81-17.73-4.88 0.02-9.28 2.02-12.47 5.22a17.69 17.69 0 0 0-5.16 12.51v11.71c0 2.96-0.63 5.8-1.77 8.38l37.21-0.26v-19.83zM289.18 489.08c10.86-1.24 18.7-10.95 17.63-21.8 0 0 0.01 0 0-0.01 0 0 0.01-0.01 0-0.02 0 0 0.01 0 0-0.01l-4.33-37.97c0-0.04-0.01-0.08-0.02-0.12l-0.92-8.06c0-0.01 0-0.03-0.01-0.04l-5.6-49.21 288.58-2.04a19.832 19.832 0 0 1-1.74-8.16v-33.01H225.09c-11.04 0-20 8.95-20 20s8.96 20 20 20h30.22l6.47 56.76v0.01l0.96 8.4 4.3 37.68 0.05 0.48c0 0.03 0.01 0.06 0.03 0.08-0.01 0.01 0 0.02 0 0.02 1.41 9.9 9.92 17.15 19.76 17.15 0.76 0 1.53-0.04 2.3-0.13zM297.47 561.71c10.15-1.16 17.66-9.74 17.73-19.71 0.03-0.21 0.05-0.42 0.06-0.63l-0.13-1.14-0.95-8.3c-1.55-10.64-11.3-18.2-22.05-16.95-10.97 1.25-18.85 11.16-17.6 22.14l0.8 6.99c0.11 0.95 0.28 1.88 0.52 2.78v0.01c2.27 8.76 10.23 14.94 19.32 14.94 0.76 0 1.53-0.04 2.3-0.13z",fill:"#004039","p-id":"1908"}),n.a.createElement("path",{d:"M798.44 328.63H698.21V369l29.4-0.21-57.78 517.02c-1.45 9.74-9.92 17.05-19.78 17.05H374.3c-9.22 0-17.22-6.4-19.42-15.2-0.14-0.59-32.39-282.84-32.39-282.84-2.92-9.05-11.91-15.09-21.72-13.98-9.84 1.13-17.24 9.08-18.01 18.6 0 0 32.23 282.43 32.28 282.76 4.56 28.95 29.87 50.66 59.26 50.66h275.75c29.81 0 55.36-22.27 59.43-51.79 0.03-0.18 0.05-0.35 0.07-0.52l58.33-521.92h30.56c11.04 0 20-8.95 20-20s-8.96-20-20-20zM811.75 177.99c-1.58-10.93-11.73-18.51-22.66-16.92L589.22 190.1l-6.09-41.98c-1.23-8.45-5.68-15.92-12.54-21.03-6.86-5.12-15.28-7.26-23.73-6.04L443.92 136c-8.45 1.22-15.92 5.68-21.04 12.53-5.12 6.86-7.26 15.29-6.03 23.73l6.09 41.98-201.25 29.23c-10.93 1.58-18.5 11.73-16.91 22.66 1.44 9.96 9.99 17.13 19.76 17.13 0.96 0 1.93-0.07 2.9-0.21l232.91-33.82h0.01l102.94-14.95c0.02 0 0.03-0.01 0.05-0.01l231.49-33.61c10.93-1.59 18.5-11.74 16.91-22.67z m-349.22 30.5l-4.95-34.06 87.11-12.65 4.95 34.06-87.11 12.65z",fill:"#004039","p-id":"1909"}),n.a.createElement("path",{d:"M391.46 765.93c1.08 10.28 9.76 17.91 19.87 17.91 0.7 0 1.41-0.04 2.12-0.11 10.99-1.16 18.95-11 17.8-21.98l-26.91-256c-1.16-10.99-10.99-18.95-21.98-17.8-10.99 1.16-18.95 11-17.8 21.98l26.9 256zM610.82 783.72c0.73 0.08 1.45 0.12 2.16 0.12 10.09 0 18.76-7.61 19.86-17.86l27.53-256c1.18-10.98-6.76-20.84-17.75-22.02-10.99-1.19-20.84 6.76-22.02 17.75l-27.53 256c-1.18 10.97 6.77 20.83 17.75 22.01zM513.36 783.84h0.13c11.05-0.07 19.94-9.08 19.87-20.13l-1.67-255.58c-0.07-11-9.01-19.87-20-19.87h-0.13c-11.05 0.07-19.94 9.08-19.87 20.13l1.67 255.58c0.08 11 9.01 19.87 20 19.87z",fill:"#004039","p-id":"1910"}))},g=function(e){var t=e.item,a=Object(r.useContext)(s),c=a.searchGithub,l=a.setSearchValue;return n.a.createElement("span",{onClick:function(){return function(e){l(e),c({searchValue:e})}(t)},className:"item"},t)},y=function(e){var t=e.historySearch,a=e.clearSearchHistory;return n.a.createElement("div",{className:"history"},n.a.createElement("div",{className:"title"},n.a.createElement("span",{className:"title_word"},"History"),n.a.createElement("div",{className:"clear",onClick:a},n.a.createElement(R,null))),t.map((function(e,t){return n.a.createElement(g,{key:t,item:e})})))};f.a.use(O.a);var b=function(){var e=Object(r.useRef)(null),t=Object(r.useRef)(null),a=Object(r.useState)(!1),c=Object(E.a)(a,2),l=c[0],o=c[1],i=Object(r.useContext)(s),u=i.loading,h=i.showHistory,O=i.searchGithub,S=i.searchValue,R=i.historySearch,g=i.clearSearchHistory,b=Object(d.get)(i.repoResult,"search.pageInfo.endCursor"),C=Object(d.get)(i.repoResult,"search.pageInfo.startCursor"),_=Object(d.get)(i.repoResult,"search.pageInfo.hasNextPage");Object(r.useEffect)((function(){e.current&&(t.current=new f.a(e.current,{pullUpLoad:!0}),t.current.on("pullingUp",H))}));var H=function(){var e=Object(m.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.next=3,O({hasNextPage:_,searchValue:S,endCursor:b});case 3:t.current.finishPullUp(),t.current.refresh(),o(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return n.a.createElement(r.Fragment,null,h&&R.length>0?n.a.createElement(y,{historySearch:R,clearSearchHistory:g}):null,C||b||!S||u||h?!h&&n.a.createElement("div",{className:"pullup"},n.a.createElement("div",{ref:e,className:"pullup-wrapper"},n.a.createElement("div",{className:"pullup-content"},n.a.createElement(v,null),l&&n.a.createElement("div",{className:"pullup-tips"},n.a.createElement("div",{className:"after-trigger"},n.a.createElement("span",{className:"pullup-txt"},"loading...")))))):n.a.createElement("div",{className:"no_data"},"\u6682\u65e0\u641c\u7d22\u6570\u636e"))},C=(a(69),function(){var e=Object(r.useContext)(s),t=e.loading,a=e.errorMessage;return n.a.createElement("div",{className:"App"},n.a.createElement("div",{className:"wrap"},n.a.createElement("div",{className:"head_box"},n.a.createElement(u,null)),a?n.a.createElement("div",{className:"error"},null===a||void 0===a?void 0:a.message):n.a.createElement(r.Fragment,null,n.a.createElement(b,null),t&&n.a.createElement("div",{className:"loading"},"loading..."))))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var _=a(23),H=a(8),j=function(e,t){return t.filter((function(t){return t===e})).length},w=function(){var e=[];return window.localStorage&&(e=(e=localStorage.getItem("SEARCH_REPO_HISTORY"))?JSON.parse(e):[]),e},N=function(e,t){switch(t.type){case"SEARCH_REPO_REQUEST":return Object(H.a)(Object(H.a)({},e),{},{loading:!0});case"SEARCH_REPO_SUCCESS":return Object(H.a)(Object(H.a)({},e),{},{loading:!1,repoList:[].concat(Object(_.a)(t.payload.search.edges),Object(_.a)(e.repoList)),repoResult:t.payload});case"SEARCH_REPO_FAILURE":return Object(H.a)(Object(H.a)({},e),{},{loading:!1,errorMessage:t.error});case"SEARCH_VALUE":return Object(H.a)(Object(H.a)({},e),{},{loading:!1,searchValue:t.payload});case"SEARCH_CLEAR_REPO":return Object(H.a)(Object(H.a)({},e),{},{repoList:[],repoResult:{},errorMessage:null});case"SEARCH_REPO_HISTORY":return j(t.payload,e.historySearch)?e:Object(H.a)(Object(H.a)({},e),{},{historySearch:[t.payload].concat(Object(_.a)(e.historySearch))});case"SEARCH_REPO_HISTORY_CLEAR":return Object(H.a)(Object(H.a)({},e),{},{historySearch:[]});case"SEARCH_SHWO_HISTORY":return Object(H.a)(Object(H.a)({},e),{},{showHistory:t.payload});default:return e}},A=a(59),P=a(26),T=new P.ApolloClient({uri:"https://api.github.com/graphql",cache:new P.InMemoryCache,headers:{authorization:"bearer ".concat(i)}});function L(){var e=Object(A.a)(["\n        query {\n          search(",") {\n            repositoryCount\n            pageInfo {\n              hasNextPage\n              endCursor\n              startCursor\n            }\n            edges {\n              node {\n                ... on Repository {\n                  id\n                  url\n                  nameWithOwner\n                  name\n                  createdAt\n                  description\n                  descriptionHTML\n                  forkCount\n                  updatedAt\n                }\n              }\n            }\n          }\n        }\n      "]);return L=function(){return e},e}var I=function(e,t){e({type:"SEARCH_SHWO_HISTORY",payload:t})},x=function(e,t){var a=t.searchValue;!function(e){var t=w();if(!j(e,t)){var a=[e].concat(Object(_.a)(t));window.localStorage&&localStorage.setItem("SEARCH_REPO_HISTORY",JSON.stringify(a))}}(a),e({type:"SEARCH_REPO_HISTORY",payload:a})},M=function(e){window.localStorage&&localStorage.clear(),e({type:"SEARCH_REPO_HISTORY_CLEAR"})},V=function(e){var t={loading:!1,searchValue:"",repoList:[],repoResult:{},historySearch:w(),errorMessage:null,showHistory:!0},a=Object(r.useReducer)(N,t),c=Object(E.a)(a,2),l=c[0],o=c[1];return n.a.createElement(s.Provider,{value:{loading:l.loading,repoList:l.repoList,repoResult:l.repoResult,searchValue:l.searchValue,errorMessage:l.errorMessage,showHistory:l.showHistory,historySearch:l.historySearch,clearRepo:function(){return function(e){return e({type:"SEARCH_CLEAR_REPO"})}(o)},clearSearchHistory:function(){return M(o)},searchGithub:function(e){return function(e,t){var a=t.searchValue;if(!1!==t.hasNextPage&&a){!function(e){e({type:"SEARCH_REPO_REQUEST"})}(e);var r=function(e){var t='query: "'.concat(e.searchValue,'", type: REPOSITORY, first: ').concat(20);return e.endCursor&&e.hasNextPage&&(t='query:"'.concat(e.searchValue,'", type: REPOSITORY, first: ').concat(20,',after:"').concat(e.endCursor,'"')),t}(t);return T.query({query:Object(P.gql)(L(),r)}).then((function(a){!function(e,t){e({type:"SEARCH_REPO_SUCCESS",payload:t})}(e,a.data),x(e,t),I(e,!1)})).catch((function(t){!function(e,t){e({type:"SEARCH_REPO_FAILURE",error:t})}(e,t)}))}}(o,e)},setShowHistory:function(e){return I(o,e)},setSearchValue:function(e){return function(e,t){e({type:"SEARCH_VALUE",payload:t})}(o,e)}}},e.children)};l.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(V,null,n.a.createElement(C,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[62,1,2]]]);
//# sourceMappingURL=main.b9b14340.chunk.js.map